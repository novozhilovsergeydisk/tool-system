{% extends 'inventory/base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3 mt-2">
    <h3 class="mb-0">üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
    
    {% if user.is_staff %}
    <a href="{% url 'employee_add' %}" class="btn btn-success">
        <i class="fa-solid fa-user-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    </a>
    {% endif %}
</div>

<div class="card shadow-sm">
    <div class="card-body p-0">
        <table class="table table-hover mb-0 align-middle">
            <thead>
                <tr>
                    <th>–õ–æ–≥–∏–Ω</th>
                    <th>–ò–º—è –§–∞–º–∏–ª–∏—è</th>
                    <th>Email</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for emp in employees %}
                <tr class="{% if not emp.is_active %}opacity-50{% endif %}">
                    <td>
                        {% if not emp.is_active %}
                            <s class="text-danger">{{ emp.username }}</s>
                        {% else %}
                            <b>{{ emp.username }}</b>
                        {% endif %}
                    </td>
                    <td>{{ emp.first_name }} {{ emp.last_name }}</td>
                    <td>{{ emp.email }}</td>
                    <td>
                        {% if emp.is_active %}
                            <span class="badge bg-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                        {% else %}
                            <span class="badge bg-secondary">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>
                        {% endif %}
                        {% if emp.is_staff %}
                            <span class="badge bg-danger">–ê–¥–º–∏–Ω</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="d-flex gap-1">
                            <a href="{% url 'employee_edit' emp.id %}" class="btn btn-sm btn-outline-primary" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                <i class="fa-solid fa-pen"></i>
                            </a>
                            
                            {% if emp.id != user.id %}
                                <form action="{% url 'employee_delete' emp.id %}" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ {{ emp.username }}? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!');">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-sm btn-outline-danger" title="–£–¥–∞–ª–∏—Ç—å">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                </form>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center py-3 text-muted">–ù–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}